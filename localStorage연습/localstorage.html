<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ë¡œê·¸ì¸ ì‹œìŠ¤í…œ</title>
	</head>
	<body>
		<div class="box">
			<label for="id">ì•„ì´ë””:</label>
			<input type="text" id="id" name="id" />
			<br />
			<label for="password">ë¹„ë°€ë²ˆí˜¸: </label>
			<input type="text" id="password" name="password" />
			<button class="logIn">ë¡œê·¸ì¸</button>
		</div>
		<div class="afterLogin" style="display: none">
			<div class="welcomeBox"></div>
			<button class="logOut">ë¡œê·¸ì•„ì›ƒ</button>
		</div>

		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const box = document.querySelector('.box');
				const id = document.querySelector('#id');
				const password = document.querySelector('#password');
				const logIn = document.querySelector('.logIn');
				const welcomeBox = document.querySelector('.welcomeBox');
				const logOut = document.querySelector('.logOut');
				const afterLogin = document.querySelector('.afterLogin');

				// ğŸ”¹ ê¸°ì¡´ ìœ ì € ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° (ë°°ì—´ ìœ ì§€)
				let users = JSON.parse(localStorage.getItem('users')) || [];

				// ğŸ”¹ í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
				let loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));

				// ğŸ”¹ ë¡œê·¸ì¸ ìœ ì§€ ê¸°ëŠ¥ (ìƒˆë¡œê³ ì¹¨í•´ë„ ë¡œê·¸ì¸ ìœ ì§€)
				if (loggedInUser) {
					showWelcomeMessage(loggedInUser.Id);
				}

				logIn.addEventListener('click', () => {
					if (id.value && password.value) {
						const userInfo = {
							Id: id.value,
							Password: password.value,
						};

						// ğŸ”¹ users ë°°ì—´ì— ìœ ì € ì •ë³´ ì¶”ê°€ (ì¤‘ë³µ ê²€ì‚¬)
						if (!users.some((user) => user.Id === userInfo.Id)) {
							users.push(userInfo);
							localStorage.setItem('users', JSON.stringify(users));
						}

						// ğŸ”¹ í˜„ì¬ ë¡œê·¸ì¸í•œ ìœ ì € ì •ë³´ ì €ì¥ (ì„¸ì…˜ ìœ ì§€)
						localStorage.setItem('loggedInUser', JSON.stringify(userInfo));

						// ğŸ”¹ ì½˜ì†” ì¶œë ¥
						console.log(`âœ… ë¡œê·¸ì¸ ì™„ë£Œ! ì €ì¥ëœ ì•„ì´ë””: ${userInfo.Id}`);
						console.log('ëª¨ë“  ìœ ì €:', users);

						showWelcomeMessage(userInfo.Id);
					} else {
						alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”');
					}
				});

				// ğŸ”¹ ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
				logOut.addEventListener('click', () => {
					// ğŸ”¸ í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ë§Œ ì‚­ì œ
					localStorage.removeItem('loggedInUser');

					// ğŸ”¸ UI ì´ˆê¸°í™”
					welcomeBox.textContent = '';
					afterLogin.style.display = 'none';
					box.style.display = 'block';

					// ğŸ”¸ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
					id.value = '';
					password.value = '';

					console.log('ğŸš€ ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ! (ìœ ì € ë°°ì—´ì€ ìœ ì§€ë¨)');
				});

				// ğŸ”¹ í™˜ì˜ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
				function showWelcomeMessage(userId) {
					box.style.display = 'none';
					afterLogin.style.display = 'block';
					welcomeBox.innerHTML = `<p>${userId}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</p>`;
				}
			});
		</script>
	</body>
</html>
