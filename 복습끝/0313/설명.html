<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <script>
    // 비동기 함수
    // fetchData() : 사용자 정의함수
    /*
    promise : 네트워크 요청, 시간이 걸리는 작업 등에 사용
    async 키워드는 promise 를 반환하는 함수
    setTimeOut(시간) : 지정된 시간 후 한번 실행
  */

    async function fetchData() {
      return new Promise((resolve) => {
        setTimeout(() => resolve('데이터 로드 완료'), 2000);
      });
    }
    // getData(): 사용자 정의함수
    /*
    async 함수 내부에 await 함수를 호출한다.

  */
    async function getData() {
      console.log('데이터를 가져오는중...');
      const data = await fetchData();
      console.log(data);
    }
    getData();
    // getData(); : 실행하면 데이터를 가져오는 중이 즉시 출력되고, 2초 뒤 데이터 로드 완료
  </script>
  <script>
    // try...catch : 예외처리 비동기 함수에서 에러가 발생할 경우
    async function fetchData() {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          let success = Math.random() > 0.5; //50% 확률의 성공 or 실패
          success ? resolve('데이터 로드 완료!') : reject('데이터 로드 실패');
        }, 2000);
      });
    }
    async function getData() {
      try {
        console.log('데이터를 가져오는 중...');
        const data = await fetchData();
        console.log(data);
      } catch (error) {
        console.log('에러발생', error);
      }
    }
    getData();
  </script>
  <script>
    //생성자 함수를 이용하여 새로운 객체를 만드는 방법
    function person(name, age) {
      console.log(this);
      this.name = name;
      this.age = age;
    }
    const p = new person('홍길동', 20);
    console.log(p, p.name, p.age);

    // 생성된 객체 및 속성값을 출력
    const b = new person('둘리', 10);
    console.log(b, b.name, b.age);

    //화살표 함수로 생성자 함수를 만들때(오류) this를 사용할 수 없다.
    const dog = (name, age) => {
      console.log(this);
      this.name = name;
      this.age = age;
    };
  </script>
  <body></body>
</html>
